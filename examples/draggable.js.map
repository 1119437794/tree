{"version":3,"sources":["webpack:///./examples/util.js?975e","webpack:///./examples/draggable.js","webpack:///./examples/draggable.less"],"names":[],"mappings":"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","file":"draggable.js","sourcesContent":["\nconst x = 3;\nconst y = 2;\nconst z = 1;\n// x：每一级下的节点总数。y：每级节点里有y个节点、存在子节点。z：树的level层级数（0表示一级）\n/* eslint no-param-reassign:0*/\nconst rec = (n) => n >= 0 ? x * Math.pow(y, n--) + rec(n) : 0;\nconsole.log('总节点数：', rec(z + 1));\n// 性能测试：总节点数超过 2000（z要小）明显感觉慢。z 变大时，递归多，会卡死。\n\nconst gData = [];\n\nconst generateData = (_level, _preKey, _tns) => {\n  const preKey = _preKey || '0';\n  const tns = _tns || gData;\n\n  const children = [];\n  for (let i = 0; i < x; i++) {\n    const key = `${preKey}-${i}`;\n    tns.push({title: key + '-label', key: key + '-key'});\n    if (i < y) {\n      children.push(key);\n    }\n  }\n  if (_level < 0) {\n    return tns;\n  }\n  const __level = _level - 1;\n  children.forEach((key, index) => {\n    tns[index].children = [];\n    return generateData(__level, key, tns[index].children);\n  });\n};\ngenerateData(z);\n\n\nfunction loopData(data, callback) {\n  const loop = (d, level = 0) => {\n    d.forEach((item, index) => {\n      const pos = `${level}-${index}`;\n      if (item.children) {\n        loop(item.children, pos);\n      }\n      callback(item, index, pos);\n    });\n  };\n  loop(data);\n}\n\nfunction spl(str) {\n  return str.split('-');\n}\nfunction splitLen(str) {\n  return str.split('-').length;\n}\n\nfunction getFilterExpandedKeys(data, expandedKeys) {\n  const expandedPosArr = [];\n  loopData(data, (item, index, pos) => {\n    if (expandedKeys.indexOf(item.key) > -1) {\n      expandedPosArr.push(pos);\n    }\n  });\n  const filterExpandedKeys = [];\n  loopData(data, (item, index, pos) => {\n    expandedPosArr.forEach(p => {\n      if ((splitLen(pos) < splitLen(p)\n        && p.indexOf(pos) === 0 || pos === p)\n        && filterExpandedKeys.indexOf(item.key) === -1) {\n        filterExpandedKeys.push(item.key);\n      }\n    });\n  });\n  return filterExpandedKeys;\n}\n\nfunction isSibling(pos, pos1) {\n  pos.pop();\n  pos1.pop();\n  return pos.join(',') === pos1.join(',');\n}\n\nfunction getRadioSelectKeys(data, selectedKeys, key) {\n  const res = [];\n  const pkObjArr = [];\n  const selPkObjArr = [];\n  loopData(data, (item, index, pos) => {\n    if (selectedKeys.indexOf(item.key) > -1) {\n      pkObjArr.push([pos, item.key]);\n    }\n    if (key && key === item.key) {\n      selPkObjArr.push(pos, item.key);\n    }\n  });\n  const lenObj = {};\n  const getPosKey = (pos, k) => {\n    const posLen = splitLen(pos);\n    if (!lenObj[posLen]) {\n      lenObj[posLen] = [[pos, k]];\n    } else {\n      lenObj[posLen].forEach((pkArr, i) => {\n        if (isSibling(spl(pkArr[0]), spl(pos))) {\n          // 后来覆盖前者\n          lenObj[posLen][i] = [pos, k];\n        } else if (spl(pkArr[0]) !== spl(pos)) {\n          lenObj[posLen].push([pos, k]);\n        }\n      });\n    }\n  };\n  pkObjArr.forEach((pk) => {\n    getPosKey(pk[0], pk[1]);\n  });\n  if (key) {\n    getPosKey(selPkObjArr[0], selPkObjArr[1]);\n  }\n\n  Object.keys(lenObj).forEach((item) => {\n    lenObj[item].forEach((i) => {\n      if (res.indexOf(i[1]) === -1) {\n        res.push(i[1]);\n      }\n    });\n  });\n  return res;\n}\n\n\nexport { gData, getFilterExpandedKeys, getRadioSelectKeys };\n\n\n\n/** WEBPACK FOOTER **\n ** ./examples/util.js\n **/","import 'rc-tree/assets/index.less';\nimport './draggable.less';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Tree, {TreeNode} from 'rc-tree';\nimport { gData } from './util';\n\nconst Demo = React.createClass({\n  getInitialState() {\n    return {\n      gData: gData,\n      expandedKeys: ['0-0-key', '0-0-0-key', '0-0-0-0-key'],\n    };\n  },\n  onDragStart() {\n  },\n  onDragEnter(info) {\n    // console.log(info);\n    this.setState({\n      expandedKeys: info.expandedKeys,\n    });\n  },\n  onDrop(info) {\n    const dropKey = info.node.props.eventKey;\n    const dragKey = info.dragNode.props.eventKey;\n    // const dragNodesKeys = info.dragNodesKeys;\n    const loop = (data, key, callback) => {\n      data.forEach((item, index, arr) => {\n        if (item.key === key) {\n          return callback(item, index, arr);\n        }\n        if (item.children) {\n          return loop(item.children, key, callback);\n        }\n      });\n    };\n    const data = [...this.state.gData];\n    let dragObj;\n    loop(data, dragKey, (item, index, arr) => {\n      arr.splice(index, 1);\n      dragObj = item;\n    });\n    if (info.dropToGap) {\n      let ar;\n      let i;\n      loop(data, dropKey, (item, index, arr) => {\n        ar = arr;\n        i = index;\n      });\n      ar.splice(i, 0, dragObj);\n    } else {\n      loop(data, dropKey, (item) => {\n        item.children = item.children || [];\n        // where to insert 示例添加到尾部，可以是随意位置\n        item.children.push(dragObj);\n      });\n    }\n    this.setState({\n      gData: data,\n      expandedKeys: info.rawExpandedKeys.concat([info.node.props.eventKey]),\n    });\n  },\n  render() {\n    const loop = data => {\n      return data.map((item) => {\n        if (item.children) {\n          return <TreeNode key={item.key} title={item.title}>{loop(item.children)}</TreeNode>;\n        }\n        return <TreeNode key={item.key} title={item.title} />;\n      });\n    };\n    return (<div className=\"draggable-demo\">\n      <h2>draggable </h2>\n      <p>drag a node into another node</p>\n      <div className=\"draggable-container\">\n        <Tree expandedKeys={this.state.expandedKeys}\n              draggable\n              onDragStart={this.onDragStart}\n              onDragEnter={this.onDragEnter}\n              onDrop={this.onDrop}\n              >\n          {loop(this.state.gData)}\n        </Tree>\n      </div>\n    </div>);\n  },\n});\n\nReactDOM.render(<Demo />, document.getElementById('__react-content'));\n\n\n\n/** WEBPACK FOOTER **\n ** ./examples/draggable.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./examples/draggable.less\n ** module id = 223\n ** module chunks = 4\n **/"],"sourceRoot":""}